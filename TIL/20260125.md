# Git 입문 학습 정리

## [0] vim 모드

- **Normal mode**: esc 키를 누르면 어떤 모드에서든 Normal mode로 전환
- **Insert mode**: Normal mode에서 i 키를 누르면 입력 모드
- **Visual mode**: Normal mode에서 v 키를 누르면 선택 모드
- **Command-line mode**: Normal mode에서 : 키를 누르면 명령어 모드
  - `:{n}` - n번째 줄로 이동
  - `:set nu` - 줄 번호 표시
  - `:w` - 저장
  - `:q` - 종료
  - `:wq` - 저장 후 종료
  - `:q!` - 저장하지 않고 강제 종료
  - `:set paste` - 복붙 가능 모드
  - `:set number` - 줄 번호 표시
  - `:set 10` - 10번째 줄로 이동

## [1] Git이란?

**분산형 버전관리 시스템**

### 특징

- 단순한 구조와 빠른 속도
- 분산형 저장소 지원
- 수천개의 브랜치 가능

## [2] Git Local and Remote Repository 반영하기

### 로컬 자료 Staging Area에 올리기

```bash
Working Directory -> git add -> Staging Area
```

```bash
$ git add 파일명.확장자
```

※ 주의: 이때 동작 단위로 파일을 올릴 것

### Staging Area에서 Local Repository 커밋하기

```bash
Staging Area -> git commit -> Local Repository
```

**커밋 두 가지 방법:**

1. `$ git commit` 이후 vi로 첫 줄에 이력 남기기
1. `git commit -m` 옵션으로 이력 바로 주기
   - 예시: `$ git commit -m "feat: Add Iteration on main.py"`

### Local에서 Remote 반영하기

```bash
Local Repository -> git push -> Remote Repository
```

```bash
$ git push origin main
```

## [3] Conventional Commits

커밋 메시지 prefix 규칙:

```shell
feat    : 기능 개발 관련
fix     : 오류 개선 혹은 버그 패치
docs    : 문서화 작업
test    : test 관련
conf    : 환경 설정 관련
build   : 빌드 작업 관련
ci      : Continuous Integration 관련
chore   : 패키지 매니저, 스크립트 등
style   : 코드 포매팅 관련
refactor: 코드 리팩토링
```

## [4] 브랜치 관리 방법

### 브랜치 목록 확인

```bash
$ git branch        # 로컬 브랜치 목록
$ git branch -r     # 원격 브랜치 목록
$ git branch -a     # 모든 브랜치 목록
```

### 새 브랜치 생성

```bash
$ git branch 브랜치명
```

### 브랜치 전환

```bash
$ git switch 브랜치명
```

## [5] Git Cherry-pick

특정 브랜치의 커밋을 현재 브랜치로 가져오는 기능

### 기본 사용법

```bash
$ git cherry-pick <커밋해시>
```

### 여러 커밋 가져오기

```bash
$ git cherry-pick <커밋1> <커밋2> <커밋3>
$ git cherry-pick <시작커밋>..<끝커밋>  # 시작커밋은 제외
$ git cherry-pick <시작커밋>^..<끝커밋>  # 시작커밋 포함
```

### 옵션

```bash
$ git cherry-pick -n <커밋해시>  # 커밋하지 않고 변경사항만 스테이징
$ git cherry-pick --continue     # 충돌 해결 후 계속 진행
$ git cherry-pick --abort        # cherry-pick 취소
$ git cherry-pick --skip         # 현재 커밋 건너뛰기
```

### 사용 예시

```bash
# 다른 브랜치의 특정 커밋을 현재 브랜치로 가져오기
$ git switch main
$ git cherry-pick abc1234

# 여러 커밋을 한 번에 가져오기
$ git cherry-pick abc1234 def5678

# 커밋 범위 가져오기 (abc1234 제외, def5678 포함)
$ git cherry-pick abc1234..def5678
```

※ 주의: cherry-pick은 커밋 해시가 변경되므로 같은 커밋이 아닌 새로운 커밋으로 생성됩니다.

## [6] .gitignore 설정하기

clone 이후 가장 먼저 해야 할 일

특정 파일이나 디렉토리를 추적하지 않도록 명시하기 위한 파일

- 참고: [gitignore.io](https://www.toptal.com/developers/gitignore/)
- 관련 키워드 입력 후 생성 버튼 클릭
- 다음 페이지에서 텍스트 복사하여 .gitignore 파일에 붙여넣기

## [7] pre-commit 설정하기

커밋 전 자동으로 코드 검사를 수행하는 도구

### 설정 방법

```bash
$ touch .pre-commit-config.yaml  # 파일명은 고정
$ pre-commit --version
$ cat .pre-commit-config.yaml
$ pre-commit install
$ git status
$ git add README.md
$ git commit -m "test: test about whitespace"
```

### 실패한 파일 수정

```bash
$ vi README.md  # 파일 제일 끝에 공백 사라진 거 확인
$ git push origin main
```

### pre-commit 자동실행 해제

```bash
$ rm .git/hooks/pre-commit
```

- 참고: [pre-commit hooks](https://pre-commit.com/hooks.html)
- 참고: [pre-commit 공식 사이트](https://pre-commit.com/)
